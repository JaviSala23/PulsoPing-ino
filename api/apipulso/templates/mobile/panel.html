{% extends "layout_mobile.html" %}
{% load static %}

{% block title %}Panel con jQuery Mobile{% endblock %}

{% block content %}
<style>
    /* CSS personalizado para el diseño del reloj */
    .clock-container {
        position: relative;
        width: 150px;
        height: 150px;
        margin: auto;
        border: 2px solid #4242ec; /* Opcional: Añade un borde para ver la dimensión del contenedor */
        border-radius: 50px;
    }
    .clock {
        background: url("{% static 'images/clock-face.png' %}") no-repeat center center;
        background-size: cover;
        width: 100%;
        height: 100%;
        position: relative;
    }
    .temperature {
        position: absolute;
        top: 10%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 24px;
        color: #f20909;
        text-align: center;
    }
    .status {
        position: absolute;
        bottom: 10px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 16px;
        color: #f50000;
        text-align: center;
    }
</style>

<div data-role="page" id="dashboard" class="container">
    <div data-role="header" class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">Dashboard</a>
    </div>

    <div data-role="content" class="mt-3 text-center">
        <div class="clock-container">
            <div class="clock">
                <div class="temperature">
                    <span id="temp">-</span>°C
                </div>
                <div class="status">
                    <div id="door-status">Puerta: Cerrada</div>
                    <div id="compressor-status">Compresor: Apagado</div>
                </div>
            </div>
        </div>
    </div>

    <div data-role="footer" class="text-center bg-light py-2">
        <h4>{% block footer_text %}Pie de página{% endblock %}</h4>
    </div>
</div>

<!-- JavaScript para actualizar los datos -->
<script>
    $(document).ready(function() {
        function updateData() {
            // Ejemplo de datos; en una aplicación real, estos vendrían de una API o base de datos
            const temperature = 4; // Grados Celsius
            const isDoorOpen = false; // Estado de la puerta
            const isCompressorOn = true; // Estado del compresor

            $('#temp').text(temperature);
            $('#door-status').text(isDoorOpen ? 'Puerta: Abierta' : 'Puerta: Cerrada');
            $('#compressor-status').text(isCompressorOn ? 'Compresor: Encendido' : 'Compresor: Apagado');
        }

        updateData();
    });
</script>
{% endblock %}
